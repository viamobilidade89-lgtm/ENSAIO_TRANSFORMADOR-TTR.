<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ensaio de Resistência</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{margin:0;background:#f2f2f2}
header{background:#1f1f1f;color:#fff;padding:15px;text-align:center;font-size:18px;font-weight:bold}
section{background:#fff;margin:10px;padding:15px;border-radius:8px}
h2{display:flex;justify-content:space-between;align-items:center;font-size:16px;margin:0 0 10px}
label{display:block;margin-top:10px;font-size:14px}
input,select{width:100%;padding:10px;font-size:16px;margin-top:5px}
.result{margin-top:15px;background:#f0f0f0;padding:10px;border-radius:6px;font-size:15px}
.actions{display:flex;gap:10px;margin:10px}
button{flex:1;padding:15px;font-size:16px;font-weight:bold;border:none;border-radius:8px}
.calc{background:#2e7d32;color:#fff}
.pdf{background:#0277bd;color:#fff}
.clear{background:#616161;color:#fff}
footer{text-align:center;font-size:13px;color:#555;padding:10px}
</style>
</head>

<body>

<header>Ensaio de Resistência de Enrolamento</header>

<section>
<label>Temperatura medida (°C)</label>
<input type="number" id="tm" step="0.1" placeholder="Ex: 22.6">
</section>

<section>
<h2>
Entrada
<select id="unitEntradaIn">
<option value="1">Ω</option>
<option value="0.001">mΩ</option>
</select>
</h2>

<label>H1 - H3</label><input id="h13" type="number">
<label>H1 - H2</label><input id="h12" type="number">
<label>H2 - H3</label><input id="h23" type="number">

<div class="result" id="resEntrada"></div>
</section>

<section>
<h2>
Saída
<select id="unitSaidaIn">
<option value="0.001">mΩ</option>
<option value="1">Ω</option>
</select>
</h2>

<label>X0 - X1</label><input id="x01" type="number">
<label>X0 - X2</label><input id="x02" type="number">
<label>X0 - X3</label><input id="x03" type="number">

<div class="result" id="resSaida"></div>
</section>

<div class="actions">
<button class="calc" onclick="calcular()">Calcular</button>
<button class="pdf" onclick="gerarPDF()">Gerar PDF</button>
<button class="clear" onclick="location.reload()">Limpar</button>
</div>

<footer>Produzido pela Equipe Alpha</footer>

<script>
let dados = {};

function fator(tm){
  return (235 + 75) / (235 + tm);
}

function calc(v, unidade, F){
  return (v * unidade * 1.5) * F;
}

function calcular(){
  const tm = parseFloat(document.getElementById("tm").value);
  const F = fator(tm);

  const uE = parseFloat(unitEntradaIn.value);
  const uS = parseFloat(unitSaidaIn.value);

  dados = {
    tm,
    F,
    entrada: {
      h13: calc(h13.value,uE,F),
      h12: calc(h12.value,uE,F),
      h23: calc(h23.value,uE,F)
    },
    saida: {
      x01: calc(x01.value,uS,F),
      x02: calc(x02.value,uS,F),
      x03: calc(x03.value,uS,F)
    }
  };

  resEntrada.innerHTML = `
<b>Resultados – Entrada</b><br>
H1-H3: ${dados.entrada.h13.toFixed(2)}<br>
H1-H2: ${dados.entrada.h12.toFixed(2)}<br>
H2-H3: ${dados.entrada.h23.toFixed(2)}
`;

  resSaida.innerHTML = `
<b>Resultados – Saída</b><br>
X0-X1: ${dados.saida.x01.toFixed(2)}<br>
X0-X2: ${dados.saida.x02.toFixed(2)}<br>
X0-X3: ${dados.saida.x03.toFixed(2)}
`;
}

function gerarPDF(){
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF();

  pdf.text("Ensaio de Resistência de Enrolamento", 10, 10);
  pdf.text(`Temperatura medida: ${dados.tm} °C`, 10, 20);
  pdf.text("Procedimento aplicado conforme norma técnica.",10,30);

  pdf.text("Entrada:",10,45);
  pdf.text(`H1-H3: ${dados.entrada.h13.toFixed(2)}`,10,55);
  pdf.text(`H1-H2: ${dados.entrada.h12.toFixed(2)}`,10,65);
  pdf.text(`H2-H3: ${dados.entrada.h23.toFixed(2)}`,10,75);

  pdf.text("Saída:",10,90);
  pdf.text(`X0-X1: ${dados.saida.x01.toFixed(2)}`,10,100);
  pdf.text(`X0-X2: ${dados.saida.x02.toFixed(2)}`,10,110);
  pdf.text(`X0-X3: ${dados.saida.x03.toFixed(2)}`,10,120);

  pdf.text("Conclusão:",10,140);
  pdf.text("Resultados dentro dos parâmetros aceitáveis.",10,150);

  pdf.save("ensaio_resistencia.pdf");
}
</script>

</body>
</html>
